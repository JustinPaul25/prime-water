import{i as x,l as g,u as P,j as V,o as u,g as p,a as l,b as i,w as h,d as t,t as n,k as $,e as S,h as B,E as M,F as b,q as E,n as N,s as U,x as j,H as D}from"./app.d705b577.js";import{V as F,_ as T}from"./AuthenticatedLayout.444ed601.js";import{b as A,_ as H,a as q}from"./TextInput.1cdaa7db.js";import{w as z,P as G}from"./index.19086aa0.js";import"./PrimaryButton.a344d49f.js";const I={class:"flex justify-center"},L={class:"min-h-full bg-white px-4 py-16 sm:px-6 sm:py-24 md:grid md:place-items-center lg:px-8"},J={class:"mx-auto max-w-max"},K={key:0,class:"sm:flex"},O={class:"sm:mr-6"},Q={class:"sm:border-r sm:border-gray-200 sm:pr-6"},R={class:"text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl"},W={class:"mt-1 text-base text-gray-500"},X=t("p",{class:"mt-1 text-base text-gray-500"},"Total Balance:",-1),Y={class:"text-4xl font-bold tracking-tight text-indigo-600 sm:text-5xl"},Z=["onSubmit"],tt={class:"relative rounded-md shadow-sm mt-10"},et=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("p",{class:"text-gray-400"},"\u20B1")],-1),st={class:"flex mt-2 space-x-3 sm:border-l sm:border-transparent sm:pl-6"},ot=t("button",{type:"submit",class:"inline-flex items-center rounded-md border border-transparent bg-indigo-100 px-4 py-2 text-sm font-medium text-indigo-700 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},"Process Payment",-1),at={class:"py-12"},lt={class:"px-4 sm:px-6 lg:px-8"},nt={class:"sm:flex sm:items-center mt-4 w-full"},it={class:"mr-4"},rt={class:"mx-4"},ct={class:"-mx-4 mt-8 overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:-mx-6 md:mx-0 md:rounded-lg bg-white mx-4"},dt={class:"min-w-full divide-y divide-gray-300"},mt=t("thead",{class:"bg-primary-blue"},[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white font-bold sm:pl-6"},"Name"),t("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white font-bold lg:table-cell"},"Username"),t("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white font-bold lg:table-cell"},"Status"),t("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-gray-900 lg:table-cell"}),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[t("span",{class:"sr-only"},"Edit")])])],-1),ut={class:"divide-y divide-gray-200 bg-white"},pt={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},ft={class:"font-bold text-primary-blue hover:opacity-70 cursor-pointer"},xt={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell"},_t={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell"},gt={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},ht=["onClick"],Vt={__name:"Payment",setup(bt){const d=x(""),r=x(!1),s=x(""),m=U(),v=j("$swal"),y=g(()=>m.state.clients.clients),w=g(()=>m.state.clients.pagination),a=P({id:"",amount:0});z(d,()=>{f()},{debounce:500});function f(c){m.dispatch("clients/getClients",{params:{page:c,search:d.value}})}function C(c){s.value=c,r.value=!0}function _(c){r.value=!1}const k=()=>{a.id=s.value.id,a.post(route("pay-bill"),{onSuccess:()=>{a.reset("id"),a.reset("amount"),r.value=!1,f(),v.fire({icon:"success",title:"Successfully Paid",text:`Payment reflected to ${s.value.first_name} ${s.value.last_name}`,confirmButtonColor:"#23408E"})}})};return V(()=>m.dispatch("clients/getClients")),(c,o)=>(u(),p(b,null,[l(i(D),{title:"Cashier"}),l(T,null,{default:h(()=>[t("div",null,[l(F,{modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=e=>r.value=e),onCancel:o[3]||(o[3]=e=>_())},{default:h(()=>[t("div",I,[t("div",L,[t("div",J,[s.value?(u(),p("main",K,[t("div",O,[t("div",Q,[t("h1",R,n(s.value.first_name+" "+s.value.last_name),1),t("p",W,"Prev. Bill: \u20B1 "+n(s.value.account.prev_balance)+" | Current Bill: \u20B1 "+n(s.value.account.current_charges),1)])]),t("div",null,[X,t("p",Y,"\u20B1 "+n(s.value.account.prev_balance+s.value.account.current_charges),1)])])):$("",!0),t("form",{onSubmit:S(k,["prevent"])},[t("div",tt,[et,B(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i(a).amount=e),type:"number",name:"amount",class:"block w-full rounded-md border-gray-300 pl-10 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[M,i(a).amount]])]),l(A,{class:"mt-2",message:i(a).errors.amount},null,8,["message"]),t("div",st,[t("button",{onClick:o[1]||(o[1]=e=>_()),href:"#",class:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ml-auto"},"Close"),ot])],40,Z)])])])]),_:1},8,["modelValue"])]),t("div",at,[t("div",lt,[t("div",nt,[t("div",it,[l(H,{class:"font-bold",for:"search",value:"Search"}),l(q,{id:"search",type:"text",class:"mt-1 block w-full",modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=e=>d.value=e)},null,8,["modelValue"])])])]),t("div",rt,[t("div",ct,[t("table",dt,[mt,t("tbody",ut,[(u(!0),p(b,null,E(i(y).data,e=>(u(),p("tr",null,[t("td",pt,[t("a",ft,n(e.first_name+" "+e.last_name),1)]),t("td",xt,n(e.username),1),t("td",_t,[t("span",{class:N(["text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full uppercase last:mr-0 mr-1",e.status===0?"text-red-600 bg-red-200":"text-green-600 bg-green-200"])},n(e.status===0?"In-Active":"Active"),3)]),t("td",gt,[t("a",{onClick:vt=>C(e),href:"#",class:"text-primary-blue hover:opacity-75"},"Generate Payment",8,ht)])]))),256))])]),l(G,{class:"mt-6",pagination:i(w),onPaginate:f,offset:4},null,8,["pagination"])])])])]),_:1})],64))}};export{Vt as default};
