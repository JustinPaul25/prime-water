import{l as V,i as h,C as A,u as P,j as T,o as b,g as w,a as l,b as a,w as c,d as e,m as q,f as g,t as u,e as F,h as k,p as U,n as L,F as $,q as W,s as z,x as H,y as Y,H as I}from"./app.325e99e1.js";import{V as G,_ as J}from"./AuthenticatedLayout.f7389881.js";import{_ as K}from"./PrimaryButton.74dacd53.js";import{_ as m,a as y,b as _}from"./TextInput.8c158649.js";import{w as O,P as Q}from"./index.b5984130.js";const X=e("h2",{class:"font-semibold text-xl text-white leading-tight"}," Staff ",-1),Z=e("p",{class:"mt-2 text-sm text-white"},"A list of all the staffs including their name, email and role.",-1),ee={class:"py-12"},te=["onSubmit"],se={class:"mt-4"},oe={class:"mt-4"},ae=e("option",{value:"Meterman"},"Meterman",-1),le=e("option",{value:"Cashier"},"Cashier",-1),ne=[ae,le],ie={class:"flex items-center justify-end mt-4"},re={class:"px-4 sm:px-6 lg:px-8"},de={class:"sm:flex sm:items-center w-full"},ce={class:"mr-4"},ue={class:"mr-4"},me=e("option",{value:""},"All Staff",-1),fe=e("option",{value:"Meterman"},"Meterman",-1),pe=e("option",{value:"Cashier"},"Cashier",-1),he=[me,fe,pe],_e={class:"ml-auto"},ge={class:"-mx-4 mt-8 overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:-mx-6 md:mx-0 md:rounded-lg bg-white"},ve={class:"min-w-full divide-y divide-gray-300"},xe=e("thead",{class:"bg-primary-blue"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white font-bold sm:pl-6"},"Name"),e("th",{scope:"col",class:"hidden px-3 py-3.5 text-left text-sm font-semibold text-white font-bold lg:table-cell"},"Username"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white font-bold"},"Role"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[e("span",{class:"sr-only"},"Edit")])])],-1),be={class:"divide-y divide-gray-200 bg-white"},we={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},ye={class:"hidden whitespace-nowrap px-3 py-4 text-sm text-gray-500 lg:table-cell"},Se={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 capitalize"},Ce={class:"whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},Ve=["onClick"],ke=g("Delete"),Ue=e("span",{class:"sr-only"},", Lindsay Walton",-1),$e=[ke,Ue],Be=["onClick"],Me=g("Edit"),Ee=e("span",{class:"sr-only"},", Lindsay Walton",-1),Re=[Me,Ee],qe={__name:"Staff",props:{status:String},setup(De){const d=z(),v=H("$swal"),B=V(()=>d.state.staffs.staffs),M=V(()=>d.state.staffs.pagination);let i=h(!1),r=h(!1);const f=h(""),p=h("");A(f,async(n,t)=>{x()}),O(p,()=>{x()},{debounce:500});const s=P({id:"",name:"",username:"",role:""});function S(n,t){n=="create"?(r.value=!1,s.id="",s.name="",s.username="",s.role=""):(r.value=!0,s.id=t.id,s.name=t.name,s.username=t.username,s.role=t.role.replace(/^./,t.role[0].toUpperCase())),i.value=!0}function E(n){i.value=!1}function C(){i.value=!1,d.dispatch("staffs/getStaffs"),v.fire({icon:"success",title:r.value?"Staff Updated!":"Staff Saved!",text:r.value?"":'The user password is default "PW-Staff"',confirmButtonColor:"#23408E"})}function R(){d.dispatch("staffs/getStaffs"),v.fire({title:"Deleted!",text:"Staff has been deleted.",icon:"success",confirmButtonColor:"#23408E"})}function D(n){v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#23408E",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&Y.Inertia.delete(route("staff.delete",n),{onSuccess:()=>R()})})}function x(n){d.dispatch("staffs/getStaffs",{params:{page:n,role:f.value,search:p.value}})}const N=n=>{r.value?s.put(`/staff/${s.id}`,{onSuccess:()=>C()}):s.post(route("staff.create"),{onSuccess:()=>C()})};return T(()=>d.dispatch("staffs/getStaffs")),(n,t)=>(b(),w($,null,[l(a(I),{title:"Staff"}),l(J,null,{header:c(()=>[X,Z]),default:c(()=>[e("div",ee,[e("div",null,[l(G,{modelValue:a(i),"onUpdate:modelValue":t[3]||(t[3]=o=>q(i)?i.value=o:i=o),onCancel:t[4]||(t[4]=o=>E())},{title:c(()=>[g(u(a(r)?"Update Staff":"Create Staff"),1)]),default:c(()=>[e("div",null,[e("form",{onSubmit:F(N,["prevent"])},[e("div",null,[l(m,{for:"name",value:"Name"}),l(y,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:a(s).name,"onUpdate:modelValue":t[0]||(t[0]=o=>a(s).name=o),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),l(_,{class:"mt-2",message:a(s).errors.name},null,8,["message"])]),e("div",se,[l(m,{for:"username",value:"Username"}),l(y,{id:"username",type:"text",class:"mt-1 block w-full",modelValue:a(s).username,"onUpdate:modelValue":t[1]||(t[1]=o=>a(s).username=o),required:"",autocomplete:"username"},null,8,["modelValue"]),l(_,{class:"mt-2",message:a(s).errors.email},null,8,["message"])]),e("div",oe,[l(m,{for:"role",value:"Role"}),k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a(s).role=o),class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},ne,512),[[U,a(s).role]]),l(_,{class:"mt-2",message:a(s).errors.role},null,8,["message"])]),e("div",ie,[l(K,{class:L({"opacity-25":a(s).processing}),disabled:a(s).processing},{default:c(()=>[g(u(a(r)?"Update Staff":"Save Staff"),1)]),_:1},8,["class","disabled"])])],40,te)])]),_:1},8,["modelValue"])]),e("div",re,[e("div",de,[e("div",ce,[l(m,{class:"font-bold",for:"search",value:"Search"}),l(y,{id:"search",type:"text",class:"mt-1 block w-full",modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=o=>p.value=o)},null,8,["modelValue"])]),e("div",ue,[l(m,{class:"font-bold",for:"role",value:"Role"}),k(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>f.value=o),class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm"},he,512),[[U,f.value]]),l(_,{class:"mt-2",message:a(s).errors.role},null,8,["message"])]),e("div",_e,[e("button",{onClick:t[7]||(t[7]=o=>S("create",null)),type:"button",class:"mt-2 inline-flex items-center justify-center rounded-md border border-transparent bg-primary-blue px-4 py-2 text-sm font-medium text-white shadow-sm hover:opacity-75 focus:outline-none focus:ring-2 focus:opacity-75 focus:ring-offset-2 sm:w-auto"},"Add Staff")])]),e("div",ge,[e("table",ve,[xe,e("tbody",be,[(b(!0),w($,null,W(a(B).data,o=>(b(),w("tr",null,[e("td",we,u(o.name),1),e("td",ye,u(o.username),1),e("td",Se,u(o.role),1),e("td",Ce,[e("a",{onClick:j=>D(o.id),href:"#",class:"text-red-400 hover:opacity-75 mr-2"},$e,8,Ve),e("a",{onClick:j=>S("update",o),href:"#",class:"text-primary-blue hover:opacity-75"},Re,8,Be)])]))),256))])]),l(Q,{class:"mt-6",pagination:a(M),onPaginate:x,offset:4},null,8,["pagination"])])])])]),_:1})],64))}};export{qe as default};
